<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      width="device-width,"
      initial-scale="1.0,"
      maximum-scale="1.0,"
      user-scalable="0"
    />
    <script src="../p5.js"></script>
    <script src="../addons/p5.dom.min.js"></script>
    <script src="../addons/p5.sound.min.js"></script>
  </head>
  <body>
    <script>
      class Penguin {
        // 构造函数
        constructor(
          penguinX,
          penguinY,
          penguinColor,
          penguinScale,
          penguinSpeed
        ) {
          // -------------------属性---------------------

          this.pX = penguinX;
          this.pY = penguinY;
          this.pColor = penguinColor;
          this.pScale = penguinScale;
          this.pSpeed = penguinSpeed;
          this.direction = 1;
        }

        // -------------------方法---------------------
        move() {
          if (this.pX > width) {
            this.direction = -this.direction;
          } else if (this.pX < 0) {
            this.direction = -this.direction;
          }
          this.pX += this.pSpeed * this.direction;
        }

        display() {
          push();
          rectMode(CENTER);
          translate(this.pX, this.pY);
          scale(this.pScale);

          // 腿
          noStroke();
          fill(255, 160, 45);
          ellipse(-100, 225, 100, 50);
          ellipse(100, 225, 100, 50);

          // 身体
          fill(this.pColor);
          ellipse(-150, 90, 60, 235);
          ellipse(150, 90, 60, 235);
          rect(0, 100, 300, 250);
          stroke(this.pColor);
          strokeWeight(300);
          line(0, -85, 0, 30);

          // 眼睛和肚皮
          fill(225);
          noStroke();
          ellipse(-70, -80, 120, 120);
          ellipse(70, -80, 120, 120);
          ellipse(0, 95, 200, 220);

          // 眼球
          fill(0);
          ellipse(-70, -80, 15, 15);
          ellipse(70, -80, 15, 15);

          // 嘴巴
          noStroke();
          fill(255, 160, 45);
          triangle(-15, -50, 15, -50, 0, -25);
          pop();
        }
      }

      let p = [];

      function setup() {
        createCanvas(600, 600);
        background(200);
        for (let i = 0; i < 500; i++) {
          p[i] = new Penguin(
            random(width),
            random(height),
            random(120),
            random(0.1, 0.3),
            random(1, 3)
          );
        }
      }
      function draw() {
        background(200);
        for (let i = 0; i < p.length; i++) {
          p[i].move();
          p[i].display();
        }
      }
    </script>
  </body>
</html>
